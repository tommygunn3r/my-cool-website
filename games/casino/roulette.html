<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roulette - GunnersGames</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            font-family: 'Courier New', monospace;
            color: #FFD700;
            overflow-x: hidden;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5em;
            text-shadow: 0 0 20px #FFD700;
            margin-bottom: 10px;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border: 2px solid #FFD700;
            border-radius: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .balance, .current-bet, .last-win {
            font-size: 1.2em;
        }

        .wheel-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
        }

        #wheelCanvas {
            border: 4px solid #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            background: #1a1a1a;
        }

        .wheel-pointer {
            position: absolute;
            top: -10px;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #FFD700;
            filter: drop-shadow(0 0 10px #FFD700);
        }

        .result-display {
            text-align: center;
            font-size: 2em;
            margin: 20px 0;
            min-height: 50px;
            text-shadow: 0 0 10px #FFD700;
        }

        .betting-section {
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #FFD700;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .chip-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .chip {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 4px solid #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .chip:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }

        .chip.selected {
            box-shadow: 0 0 30px rgba(255, 215, 0, 1);
            transform: scale(1.15);
        }

        .chip-10 { background: linear-gradient(135deg, #8B0000, #DC143C); }
        .chip-25 { background: linear-gradient(135deg, #006400, #228B22); }
        .chip-50 { background: linear-gradient(135deg, #00008B, #4169E1); }
        .chip-100 { background: linear-gradient(135deg, #2F4F4F, #000000); }
        .chip-500 { background: linear-gradient(135deg, #8B008B, #9932CC); }

        .betting-table {
            display: grid;
            grid-template-columns: 40px repeat(12, 1fr) 40px;
            gap: 2px;
            margin: 20px auto;
            max-width: 800px;
        }

        .bet-cell {
            aspect-ratio: 1;
            border: 2px solid #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            font-size: 0.85em;
            min-height: 40px;
        }

        .bet-cell:hover {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            transform: scale(1.05);
            z-index: 10;
        }

        .bet-cell.has-bet {
            box-shadow: 0 0 20px rgba(255, 215, 0, 1);
        }

        .number-red { background: #8B0000; color: white; }
        .number-black { background: #000000; color: white; }
        .number-green { background: #006400; color: white; }

        .outside-bet {
            grid-column: span 4;
            background: rgba(255, 215, 0, 0.1);
            aspect-ratio: 4/1;
        }

        .dozen-bet {
            grid-column: span 4;
            background: rgba(255, 215, 0, 0.15);
            aspect-ratio: 4/1;
        }

        .column-bet {
            grid-row: span 3;
            background: rgba(255, 215, 0, 0.15);
            writing-mode: vertical-rl;
        }

        .zero-section {
            grid-row: span 3;
            background: #006400;
            color: white;
            font-size: 1.5em;
        }

        .bet-amount {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 215, 0, 0.9);
            color: #000;
            padding: 4px 8px;
            border-radius: 50%;
            font-size: 0.8em;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
            pointer-events: none;
            z-index: 100;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border: none;
            color: #000;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .home-link {
            display: inline-block;
            margin-top: 20px;
            color: #FFD700;
            text-decoration: none;
            font-size: 1.2em;
            transition: all 0.3s;
        }

        .home-link:hover {
            text-shadow: 0 0 10px #FFD700;
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            .betting-table {
                font-size: 0.8em;
                gap: 1px;
            }
            .chip {
                width: 50px;
                height: 50px;
                font-size: 0.8em;
            }
            #wheelCanvas {
                width: 280px !important;
                height: 280px !important;
            }
        }

        .leaderboard {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #FFD700;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .leaderboard h2 {
            text-align: center;
            margin-bottom: 15px;
        }

        .leaderboard-entry {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé∞ ROULETTE üé∞</h1>
        </header>

        <div class="game-info">
            <div class="balance">Balance: <span id="balance">5000</span> GunnerCoins</div>
            <div class="current-bet">Total Bet: <span id="totalBet">0</span></div>
            <div class="last-win">Last Win: <span id="lastWin">0</span></div>
        </div>

        <div class="wheel-container">
            <div class="wheel-pointer"></div>
            <canvas id="wheelCanvas" width="350" height="350"></canvas>
        </div>

        <div class="result-display" id="resultDisplay"></div>

        <div class="betting-section">
            <h2 style="text-align: center; margin-bottom: 20px;">Select Chip Value</h2>
            <div class="chip-selector">
                <div class="chip chip-10 selected" data-value="10">10</div>
                <div class="chip chip-25" data-value="25">25</div>
                <div class="chip chip-50" data-value="50">50</div>
                <div class="chip chip-100" data-value="100">100</div>
                <div class="chip chip-500" data-value="500">500</div>
            </div>

            <h2 style="text-align: center; margin: 20px 0;">Place Your Bets</h2>
            <div class="betting-table" id="bettingTable"></div>

            <div class="controls">
                <button id="spinBtn">SPIN (Cost: <span id="spinCost">0</span>)</button>
                <button id="clearBtn">Clear Bets</button>
                <button id="repeatBtn">Repeat Last Bet</button>
            </div>
        </div>

        <div class="leaderboard">
            <h2>üèÜ Biggest Wins üèÜ</h2>
            <div id="leaderboardList"></div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getDatabase, ref, set, get, onValue, query, orderByChild, limitToLast } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDg12ZAGvmh86PI10ivalM7CV-vTd8rs40",
            authDatabaseURL: "https://gunnersgames-default-rtdb.firebaseio.com/",
            projectId: "gunnersgames",
            appId: "1:580870829454:web:4db9148fd2bf726ed24005"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        let currentUser = null;
        let balance = 5000;
        let selectedChip = 10;
        let currentBets = {};
        let lastBets = {};
        let isSpinning = false;
        let totalBet = 0;

        // Roulette wheel numbers in order
        const wheelNumbers = [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26];
        const redNumbers = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];

        // Initialize authentication
        signInAnonymously(auth);
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                await loadUserData();
                updateDisplay();
                loadLeaderboard();
            }
        });

        async function loadUserData() {
            const userRef = ref(database, `users/${currentUser.uid}`);
            const snapshot = await get(userRef);
            if (snapshot.exists()) {
                const data = snapshot.val();
                balance = data.gunnerCoins || 5000;
            } else {
                balance = 5000;
                await saveUserData();
            }
        }

        async function saveUserData() {
            if (!currentUser) return;
            const userRef = ref(database, `users/${currentUser.uid}`);
            await set(userRef, {
                gunnerCoins: balance,
                lastPlayed: Date.now()
            });
        }

        async function saveWinToLeaderboard(winAmount) {
            if (!currentUser || winAmount <= 0) return;
            const leaderboardRef = ref(database, `leaderboards/roulette/${currentUser.uid}`);
            const snapshot = await get(leaderboardRef);
            
            let playerName = localStorage.getItem('playerName') || 'Anonymous';
            let bestWin = winAmount;
            
            if (snapshot.exists()) {
                const data = snapshot.val();
                playerName = data.playerName || playerName;
                bestWin = Math.max(data.bestWin || 0, winAmount);
            }
            
            await set(leaderboardRef, {
                playerName: playerName,
                bestWin: bestWin,
                timestamp: Date.now()
            });
        }

        function loadLeaderboard() {
            const leaderboardRef = ref(database, 'leaderboards/roulette');
            const topScoresQuery = query(leaderboardRef, orderByChild('bestWin'), limitToLast(10));
            
            onValue(topScoresQuery, (snapshot) => {
                const leaderboardList = document.getElementById('leaderboardList');
                leaderboardList.innerHTML = '';
                
                const scores = [];
                snapshot.forEach((childSnapshot) => {
                    scores.push(childSnapshot.val());
                });
                
                scores.reverse().forEach((score, index) => {
                    const entry = document.createElement('div');
                    entry.className = 'leaderboard-entry';
                    entry.innerHTML = `
                        <span>${index + 1}. ${score.playerName}</span>
                        <span>${score.bestWin.toLocaleString()} coins</span>
                    `;
                    leaderboardList.appendChild(entry);
                });
            });
        }

        // Draw the roulette wheel
        function drawWheel(rotation = 0) {
            const canvas = document.getElementById('wheelCanvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 150;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(rotation);

            const segmentAngle = (2 * Math.PI) / wheelNumbers.length;

            wheelNumbers.forEach((num, i) => {
                const startAngle = i * segmentAngle;
                const endAngle = (i + 1) * segmentAngle;

                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.arc(0, 0, radius, startAngle, endAngle);
                ctx.closePath();

                if (num === 0) {
                    ctx.fillStyle = '#006400';
                } else if (redNumbers.includes(num)) {
                    ctx.fillStyle = '#8B0000';
                } else {
                    ctx.fillStyle = '#000000';
                }
                ctx.fill();
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.save();
                ctx.rotate(startAngle + segmentAngle / 2);
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Courier New';
                ctx.fillText(num.toString(), radius * 0.75, 0);
                ctx.restore();
            });

            // Center circle
            ctx.beginPath();
            ctx.arc(0, 0, 30, 0, 2 * Math.PI);
            ctx.fillStyle = '#FFD700';
            ctx.fill();

            ctx.restore();
        }

        // Create betting table
        function createBettingTable() {
            const table = document.getElementById('bettingTable');
            const numbers = [
                [3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36],
                [2, 5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35],
                [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34]
            ];

            // Zero
            const zero = createBetCell('0', '0', 'number-green zero-section');
            table.appendChild(zero);

            // Number grid
            numbers.forEach((row, rowIndex) => {
                row.forEach(num => {
                    const color = redNumbers.includes(num) ? 'number-red' : 'number-black';
                    const cell = createBetCell(num.toString(), num.toString(), color);
                    table.appendChild(cell);
                });
                // Column bet
                const colBet = createBetCell(`col${rowIndex + 1}`, '2:1', 'column-bet');
                table.appendChild(colBet);
            });

            // Outside bets (bottom row)
            const outsideBets = [
                { id: '1-18', label: '1-18' },
                { id: 'even', label: 'EVEN' },
                { id: 'red', label: 'RED' },
                { id: 'black', label: 'BLACK' },
                { id: 'odd', label: 'ODD' },
                { id: '19-36', label: '19-36' }
            ];

            // Dozen bets
            const dozenBets = [
                { id: '1st12', label: '1st 12' },
                { id: '2nd12', label: '2nd 12' },
                { id: '3rd12', label: '3rd 12' }
            ];

            // Add spacer
            table.appendChild(document.createElement('div'));

            // Add dozen bets
            dozenBets.forEach(bet => {
                const cell = createBetCell(bet.id, bet.label, 'dozen-bet');
                table.appendChild(cell);
            });

            // Add spacer for column
            table.appendChild(document.createElement('div'));

            // Add spacer
            table.appendChild(document.createElement('div'));

            // Add outside bets
            outsideBets.forEach(bet => {
                const cell = createBetCell(bet.id, bet.label, 'outside-bet');
                table.appendChild(cell);
            });

            // Add spacer for column
            table.appendChild(document.createElement('div'));
        }

        function createBetCell(id, label, className) {
            const cell = document.createElement('div');
            cell.className = `bet-cell ${className}`;
            cell.textContent = label;
            cell.dataset.betId = id;
            cell.addEventListener('click', () => placeBet(id));
            return cell;
        }

        function placeBet(betId) {
            if (isSpinning) return;
            
            if (balance < selectedChip) {
                playSound('error');
                alert('Insufficient balance!');
                return;
            }

            if (!currentBets[betId]) {
                currentBets[betId] = 0;
            }

            const newTotal = totalBet + selectedChip;
            if (newTotal > 2000) {
                playSound('error');
                alert('Maximum bet limit is 2000 coins per spin!');
                return;
            }

            currentBets[betId] += selectedChip;
            totalBet += selectedChip;
            balance -= selectedChip;

            playSound('chip');
            updateDisplay();
            updateBetDisplay();
        }

        function updateBetDisplay() {
            document.querySelectorAll('.bet-amount').forEach(el => el.remove());
            
            Object.entries(currentBets).forEach(([betId, amount]) => {
                if (amount > 0) {
                    const cell = document.querySelector(`[data-bet-id="${betId}"]`);
                    if (cell) {
                        cell.classList.add('has-bet');
                        const amountEl = document.createElement('div');
                        amountEl.className = 'bet-amount';
                        amountEl.textContent = amount;
                        cell.appendChild(amountEl);
                    }
                }
            });
        }

        function clearBets() {
            if (isSpinning) return;
            
            balance += totalBet;
            currentBets = {};
            totalBet = 0;
            
            document.querySelectorAll('.bet-cell').forEach(cell => {
                cell.classList.remove('has-bet');
            });
            document.querySelectorAll('.bet-amount').forEach(el => el.remove());
            
            updateDisplay();
            playSound('clear');
        }

        function repeatLastBet() {
            if (isSpinning || Object.keys(lastBets).length === 0) return;
            
            clearBets();
            
            let requiredBalance = 0;
            Object.values(lastBets).forEach(amount => requiredBalance += amount);
            
            if (balance < requiredBalance) {
                alert('Insufficient balance to repeat last bet!');
                return;
            }
            
            currentBets = { ...lastBets };
            totalBet = requiredBalance;
            balance -= requiredBalance;
            
            updateDisplay();
            updateBetDisplay();
            playSound('chip');
        }

        async function spin() {
            if (isSpinning || totalBet === 0) return;
            
            isSpinning = true;
            lastBets = { ...currentBets };
            
            document.getElementById('spinBtn').disabled = true;
            document.getElementById('clearBtn').disabled = true;
            document.getElementById('repeatBtn').disabled = true;
            document.getElementById('resultDisplay').textContent = 'Spinning...';
            
            playSound('spin');
            
            const winningNumber = wheelNumbers[Math.floor(Math.random() * wheelNumbers.length)];
            const winningIndex = wheelNumbers.indexOf(winningNumber);
            const segmentAngle = (2 * Math.PI) / wheelNumbers.length;
            const targetRotation = (Math.PI * 2 * 5) + (winningIndex * segmentAngle) + (segmentAngle / 2);
            
            const duration = 4000;
            const startTime = Date.now();
            const startRotation = 0;
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3);
                const currentRotation = startRotation + (targetRotation * eased);
                
                drawWheel(currentRotation);
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    finishSpin(winningNumber);
                }
            }
            
            animate();
        }

        function finishSpin(winningNumber) {
            playSound('win');
            
            const winnings = calculateWinnings(winningNumber);
            balance += winnings;
            
            const color = winningNumber === 0 ? 'GREEN' : (redNumbers.includes(winningNumber) ? 'RED' : 'BLACK');
            document.getElementById('resultDisplay').textContent = `üé∞ ${winningNumber} ${color} üé∞`;
            document.getElementById('lastWin').textContent = winnings;
            
            if (winnings > 0) {
                saveWinToLeaderboard(winnings);
            }
            
            saveUserData();
            
            currentBets = {};
            totalBet = 0;
            
            document.querySelectorAll('.bet-cell').forEach(cell => {
                cell.classList.remove('has-bet');
            });
            document.querySelectorAll('.bet-amount').forEach(el => el.remove());
            
            updateDisplay();
            
            isSpinning = false;
            document.getElementById('spinBtn').disabled = false;
            document.getElementById('clearBtn').disabled = false;
            document.getElementById('repeatBtn').disabled = false;
        }

        function calculateWinnings(winningNumber) {
            let totalWin = 0;
            
            Object.entries(currentBets).forEach(([betId, amount]) => {
                let won = false;
                let multiplier = 0;
                
                // Straight up
                if (betId === winningNumber.toString()) {
                    won = true;
                    multiplier = 35;
                }
                // Red/Black
                else if (betId === 'red' && redNumbers.includes(winningNumber)) {
                    won = true;
                    multiplier = 1;
                } else if (betId === 'black' && !redNumbers.includes(winningNumber) && winningNumber !== 0) {
                    won = true;
                    multiplier = 1;
                }
                // Odd/Even
                else if (betId === 'odd' && winningNumber % 2 === 1) {
                    won = true;
                    multiplier = 1;
                } else if (betId === 'even' && winningNumber % 2 === 0 && winningNumber !== 0) {
                    won = true;
                    multiplier = 1;
                }
                // High/Low
                else if (betId === '1-18' && winningNumber >= 1 && winningNumber <= 18) {
                    won = true;
                    multiplier = 1;
                } else if (betId === '19-36' && winningNumber >= 19 && winningNumber <= 36) {
                    won = true;
                    multiplier = 1;
                }
                // Dozens
                else if (betId === '1st12' && winningNumber >= 1 && winningNumber <= 12) {
                    won = true;
                    multiplier = 2;
                } else if (betId === '2nd12' && winningNumber >= 13 && winningNumber <= 24) {
                    won = true;
                    multiplier = 2;
                } else if (betId === '3rd12' && winningNumber >= 25 && winningNumber <= 36) {
                    won = true;
                    multiplier = 2;
                }
                // Columns
                else if (betId === 'col1' && winningNumber % 3 === 0 && winningNumber !== 0) {
                    won = true;
                    multiplier = 2;
                } else if (betId === 'col2' && winningNumber % 3 === 2) {
                    won = true;
                    multiplier = 2;
                } else if (betId === 'col3' && winningNumber % 3 === 1) {
                    won = true;
                    multiplier = 2;
                }
                
                if (won) {
                    totalWin += amount * (multiplier + 1);
                }
            });
            
            return totalWin;
        }

        function updateDisplay() {
            document.getElementById('balance').textContent = balance;
            document.getElementById('totalBet').textContent = totalBet;
            document.getElementById('spinCost').textContent = totalBet;
        }

        // Sound effects
        function playSound(type) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'chip':
                    oscillator.frequency.value = 800;
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
                case 'spin':
                    oscillator.frequency.value = 200;
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                case 'win':
                    oscillator.frequency.value = 1200;
                    gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                    break;
                case 'clear':
                    oscillator.frequency.value = 400;
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.15);
                    break;
                case 'error':
                    oscillator.frequency.value = 150;
                    gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                    break;
            }
        }

        // Chip selection
        document.querySelectorAll('.chip').forEach(chip => {
            chip.addEventListener('click', function() {
                document.querySelectorAll('.chip').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedChip = parseInt(this.dataset.value);
                playSound('chip');
            });
        });

        // Button events
        document.getElementById('spinBtn').addEventListener('click', spin);
        document.getElementById('clearBtn').addEventListener('click', clearBets);
        document.getElementById('repeatBtn').addEventListener('click', repeatLastBet);

        // Initialize
        drawWheel();
        createBettingTable();
    </script>
</body>
</html>
